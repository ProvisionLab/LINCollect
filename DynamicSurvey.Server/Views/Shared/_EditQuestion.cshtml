@using DynamicSurvey.Server.ViewModels
@model DynamicSurvey.Server.ViewModels.Surveys.EditQuestionViewModel

<div id="editQuestionModal" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">
                    @if (Model.QuestionId == null)
                    {
                        <text>Add Question</text>
                        //Model.MatrixRows = new List<DynamicSurvey.Server.ViewModels.Surveys.MatrixRow>();
                        //Model.MatrixColumns = new List<DynamicSurvey.Server.ViewModels.Surveys.MatrixCol>();
                        Model.MatrixMultiple = true;
                    }
                    else
                    {
                        <text>Edit Question</text>
                    }
                </h4>
            </div>
            <div class="modal-body">
                <div class="portlet light bordered form-fit">
                    <div class="portlet-body form">
                        <form id="editQuestionForm" action="@Url.Action("EditQuestion", "Surveys")" method="POST" class="form-horizontal form-row-seperated">
                            <input name="SurveyTemplateId" type="hidden" value="@Model.SurveyTemplateId" />
                            <input name="QuestionId" type="hidden" value="@Model.QuestionId" />
                            <input id="questionFormat" type="hidden" value="@Model.Format" />
                            <input name="InsertPosition" type="hidden" value="@Model.InsertPosition" />
                            <div class="form-body">
                                <div class="form-group">
                                    <label class="control-label col-md-3">Question: <span class="required">*</span></label>
                                    <div class="col-md-9">
                                        <textarea name="Question" id="question" class="form-control" rows="5">@Model.Question</textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3">Short Name: <span class="required">*</span></label>
                                    <div class="col-md-9">
                                        <input name="ShortName" id="shortName" type="text" class="form-control" value="@Model.ShortName" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3">Properties:</label>
                                    <div class="col-md-9">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline">
                                                <input name="Compulsory" @if (Model.Compulsory) { <text> checked="checked" </text>     } type="checkbox" value="true" />
                                                <input name="Compulsory" type="hidden" value="false" />
                                                Compulsory
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3">Format: <span class="required">*</span></label>
                                    <div class="col-md-9">
                                        <div class="radio-list">
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.Text" class="format" />
                                                Text
                                            </label>
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.ChoiceAcross" class="format" />
                                                Choice Across
                                            </label>
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.ChoiceDown" class="format" />
                                                Choice Down
                                            </label>
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.DropDown" class="format" />
                                                Drop Down
                                            </label>
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.Matrix" class="format" />
                                                Matrix
                                            </label>
                                            <label class="radio-inline">
                                                <input name="Format" type="radio" value="@QuestionFormat.Slider" class="format" />
                                                Slider
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="question-format-container" id="textQuestionFormatContainer">
                                    <div class="form-group">
                                        <label class="control-label col-md-3">Rows: <span class="required">*</span></label>
                                        <div class="col-md-9">
                                            <input name="Rows" id="rows" type="text" class="form-control" value="@Model.Rows" />
                                        </div>
                                    </div>
                                </div>
                                <div class="question-format-container" id="choiceQuestionFormatContainer">
                                    <div class="form-group">
                                        <div class="col-md-offset-3 col-md-9">
                                            <div id="includeAnnotationContainer" class="row">
                                                <div class="col-md-3">
                                                    <label class="control-label">Include annotation:</label>
                                                </div>
                                                <div class="col-md-1">
                                                    <div class="checkbox-list">
                                                        <label class="checkbox-inline">
                                                            <input name="IncludeAnnotation" type="checkbox" @if (Model.IncludeAnnotation) { <text> checked="checked" </text>          } value="true" />
                                                            <input name="IncludeAnnotation" type="hidden" value="false" />
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            @for (var i = 0; i < Model.AnswerChoiceItemViewModels.Count; i++)
                                            {
                                                <div class="answer-choice-row row space-between-row">
                                                    <input name="AnswerChoiceItemViewModels[@i].Id" type="hidden" class="choice-id" value="@Model.AnswerChoiceItemViewModels[i].Id" />
                                                    <div class="col-md-4">
                                                        <input name="AnswerChoiceItemViewModels[@i].Text" type="text" class="text form-control" value="@Model.AnswerChoiceItemViewModels[i].Text" />
                                                    </div>
                                                    <div class="col-md-4">
                                                        <input name="AnswerChoiceItemViewModels[@i].Coding" type="text" class="coding form-control" value="@Model.AnswerChoiceItemViewModels[i].Coding" />
                                                    </div>
                                                    <div class="col-md-1">
                                                        <div class="checkbox-list">
                                                            <label class="checkbox-inline">
                                                                <input name="AnswerChoiceItemViewModels[@i].IsDefault" @if (Model.AnswerChoiceItemViewModels[i].IsDefault) { <text> checked="checked" </text>          } type="checkbox" value="true" class="is-default" />
                                                                <input name="AnswerChoiceItemViewModels[@i].IsDefault" type="hidden" value="false" class="is-default-hidden" />
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <a href="javascript:;" class="move-row-up btn btn-icon-only green">
                                                            <i class="fa fa-arrow-up">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="move-row-down btn btn-icon-only green">
                                                            <i class="fa fa-arrow-down">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="delete-row btn btn-icon-only red">
                                                            <i class="fa fa-remove">
                                                            </i>
                                                        </a>
                                                    </div>
                                                </div>
                                            }
                                            <div class="row space-between-row">
                                                <div class="col-md-9">
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="addRow" type="button" class="btn green">Add Row</button>
                                                </div>
                                            </div>
                                            <div id="allowMultipleValuesContainer" class="row space-between-row">
                                                <div class="col-md-4">
                                                    <label class="control-label">Allow multiple values:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="radio-list">
                                                        <label class="radio-inline">
                                                            <input name="AllowMultipleValues" type="radio" @if (!Model.AllowMultipleValues) { <text> checked="checked" </text>          } value="false" />
                                                            No
                                                        </label>
                                                        <label class="radio-inline">
                                                            <input name="AllowMultipleValues" type="radio" @if (Model.AllowMultipleValues) { <text> checked="checked" </text>          } value="true" />
                                                            Yes
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
@*---------------------------------------------------------------------------------------------------------------------*@
                                <div class="question-format-container" id="matrixQuestionFormatContainer">
                                    <div class="form-group">
                                        <div class="col-md-offset-3 col-md-9">
                                            <div>
                                                <label style=""><b>Rows:</b> The variants at the left side of the matrix.</label>
                                            </div>
                                            @for (var i = 0; i < Model.MatrixRows.Count; i++)
                                            {
                                                <div class="answer-choice-row-1 row space-between-row">
                                                    <input name="MatrixRows[@i].Id" type="hidden" class="choice-id" value="@Model.MatrixRows[i].Id" />
                                                    <div class="col-md-8">
                                                        <input name="MatrixRows[@i].Text" type="text" class="text form-control" value="@Model.MatrixRows[i].Text" />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <a href="javascript:;" class="move-row-up-1 btn btn-icon-only green">
                                                            <i class="fa fa-arrow-up">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="move-row-down-1 btn btn-icon-only green">
                                                            <i class="fa fa-arrow-down">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="delete-row-1 btn btn-icon-only red">
                                                            <i class="fa fa-remove">
                                                            </i>
                                                        </a>
                                                    </div>
                                                </div>
                                            }
                                            <div class="row space-between-row">
                                                <div class="col-md-8">
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="addRow1" type="button" class="btn green">Add Row</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-offset-3 col-md-9">
                                            <div>
                                                <label style=""><b>Columns:</b> The variants at the top of the matrix.</label>
                                            </div>
                                            @for (var i = 0; i < Model.MatrixColumns.Count; i++)
                                            {
                                                <div class="answer-choice-row-2 row space-between-row">
                                                    <input name="MatrixColumns[@i].Id" type="hidden" class="choice-id" value="@Model.MatrixColumns[i].Id" />
                                                    <div class="col-md-8">
                                                        <input name="MatrixColumns[@i].Text" type="text" class="text form-control" value="@Model.MatrixColumns[i].Text" />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <a href="javascript:;" class="move-row-up-2 btn btn-icon-only green">
                                                            <i class="fa fa-arrow-up">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="move-row-down-2 btn btn-icon-only green">
                                                            <i class="fa fa-arrow-down">
                                                            </i>
                                                        </a>
                                                        <a href="javascript:;" class="delete-row-2 btn btn-icon-only red">
                                                            <i class="fa fa-remove">
                                                            </i>
                                                        </a>
                                                    </div>
                                                </div>
                                            }
                                            <div class="row space-between-row">
                                                <div class="col-md-8">
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="addRow2" type="button" class="btn green">Add Row</button>
                                                </div>
                                            </div>
                                            <div id="matrixQuestionFormatContainer" class="row space-between-row">
                                                <div class="col-md-4">
                                                    <label class="control-label">Choose matrix format:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="radio-list">
                                                        <label class="radio-list">
                                                            @*<input name="MatrixMiltiple" type="radio" @if (true) { <text> checked="checked" </text>  } value="@Model.MatrixMiltiple" />*@
                                                            <input name="MatrixMultiple" type="radio" @if (Model.MatrixMultiple) { <text> checked="checked" </text>  } value="true" />
                                                            Multiple choice
                                                        </label>
                                                        <label class="radio-list">
                                                            @*<input name="MatrixSingleRow" type="radio" value="@Model.MatrixSingleRow" />*@
                                                            <input name="MatrixMultiple" type="radio" @if (!Model.MatrixMultiple) { <text> checked="checked" </text>  } value="false" />
                                                            Single in Row
                                                        </label>
                                                        @*<label class="radio-list">
                                                            <input name="MatrixSingleColumn" type="radio" value="@Model.MatrixSingleColumn" />
                                                            Single in Column
                                                        </label>*@
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
@*---------------------------------------------------------------------------------------------------------------------*@
                                <div class="question-format-container" id="sliderQuestionFormatContainer">
                                    <div class="form-group">
                                        <label class="control-label col-md-3">Extreme points: <span class="required">*</span></label>
                                        <div class="col-md-4">
                                            <input name="ExtremePointLeft" type="text" class="form-control" value="@Model.ExtremePointLeft" />
                                            <span class="help-block">Appears to left of slider</span>
                                        </div>
                                        <div class="col-md-4">
                                            <input name="ExtremePointRight" type="text" class="form-control" value="@Model.ExtremePointRight" />
                                            <span class="help-block">Appears to right of slider</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3">Values: <span class="required">*</span></label>
                                        <div class="col-md-3">
                                            <input name="MinimumValue" type="text" class="form-control input-small" value="@Model.MinimumValue" />
                                            <span class="help-block">Minimum value for slider</span>
                                        </div>
                                        <div class="col-md-3">
                                            <input name="MaximumValue" type="text" class="form-control input-small" value="@Model.MaximumValue" />
                                            <span class="help-block">Maximum value for slider</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3">Resolution: <span class="required">*</span></label>
                                        <div class="col-md-9">
                                            <input name="Resolution" type="text" class="form-control input-small" value="@Model.Resolution" />
                                            <span class="help-block">The step value. e.g. 0.5 will allow 1, 1.5, 2, 2.5 etc</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3">Show Value:</label>
                                        <div class="col-md-9">
                                            <div class="checkbox-list">
                                                <label class="checkbox-inline">
                                                    <input name="ShowValue" type="checkbox" @if (Model.ShowValue) { <text> checked="checked" </text>          } value="true" />
                                                    <input name="ShowValue" type="hidden" value="false" />
                                                </label>
                                            </div>
                                            <span class="help-block">Show user the value of the slider</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions right">
                                <button type="button" class="btn default" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn green">
                                    @if (Model.QuestionId == null)
                                    {
                                        <text>Add Question</text>
                                    }
                                    else
                                    {
                                        <text>Edit Question</text>
                                    }
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>